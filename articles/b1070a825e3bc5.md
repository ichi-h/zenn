---
title: "Helm/Helmfile/helm-secretsã®è§£èª¬ãŠã‚ˆã³ç®¡ç†æ–¹æ³•ã®æ¤œè¨"
emoji: "ğŸ‘Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Kubernetes, Helm, helmfile]
published: false
---

## ã¯ã˜ã‚ã«

æœ¬è¨˜äº‹ã§ã¯ Helmã€Helmfileã€helm-secrets ã®ãã‚Œãã‚Œã®è§£èª¬ã¨ã€ãã‚Œã‚‰ã‚’ä½¿ã£ã¦ Kubernetes Manifest ã‚„ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã©ã®ã‚ˆã†ã«ç®¡ç†ã™ã‚‹ã‹ã‚’æ¤œè¨ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

æœ¬è¨˜äº‹ã¯ã€å…ˆæ—¥æŠ•ç¨¿ã—ãŸ **NixOS + Kubernetes ã§è‡ªå®…ã‚µãƒ¼ãƒãƒ¼ã‚’æ§‹ç¯‰ã«ã¦æŠ€è¡“è¨˜äº‹**ã®è£œè¶³ã®å½¹å‰²ã‚‚å…¼ã­ã¦ã„ã¾ã™ã€‚  
ä»¥ä¸‹ã®è¨˜äº‹ã¨ã¯ç‹¬ç«‹ã—ãŸå†…å®¹ã¨ãªã£ã¦ãŠã‚Šã¾ã™ãŒã€èˆˆå‘³ãŒã”ã–ã„ã¾ã—ãŸã‚‰ä»¥ä¸‹ã¨åˆã‚ã›ã¦ã”è¦§ã„ãŸã ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ã€‚

https://zenn.dev/ichi_h/articles/ff001e0005e33c

## Helm/Helmfile ã¨ã¯ãªã«ã‹

**Helm** ã¨ã¯ã€**Kubernetes Manifest ã‚’ Chart ã¨ã„ã†å˜ä½ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã™ã‚‹ã“ã¨ã§ã€ãã‚Œã‚‰ã‚’ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚Šã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã€Manifest ã®å†åˆ©ç”¨ãªã©ã‚’å¯èƒ½ã«ã™ã‚‹ä»•çµ„ã¿**ã§ã™ã€‚  
Helm ã§ã¯ã€ä½œæˆã—ãŸï¼ˆãªã„ã—å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ï¼‰ Chart ã‚’ã‚³ãƒãƒ³ãƒ‰ã‚’ç”¨ã„ã¦**æ‰‹ç¶šãçš„ã«**æ“ä½œã—ã¾ã™ã€‚

ä¾‹ãˆã°ã€ã™ã§ã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ Helm Chart ã‚’ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã«ã¯ã€ãã® Chart ãŒç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã‚’è¿½åŠ ã—ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```
$ helm repo add bitnami https://charts.bitnami.com/bitnami
$ helm install bitnami/mysql --generate-name
```

ãã—ã¦ã€ã“ã†ã—ãŸæ‰‹ç¶šãã‚’è€ƒãˆã‚‹ã“ã¨ãªãã€**å®£è¨€çš„ã«** Helm Chart ã‚’æ‰±ãˆã‚‹ã‚ˆã†ã«ã—ãŸä»•çµ„ã¿ãŒ **Helmfile** ã§ã™ã€‚  
ã‚‚ã—ä¸Šè¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ Helmfile ã§ç®¡ç†ã—ãŸå ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ãª `helmfile.yaml` ã‚’ä½œæˆã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

```yaml
repositories:
  - name: bitnami
    url: https://charts.bitnami.com/bitnami

releases:
  - name: mysql
    chart: bitnami/mysql
    version: 14.0.3
```

ãã—ã¦ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã„ã¦ã„ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¦ `helmfile apply` ã‚’å®Ÿè¡Œã™ã‚‹ã ã‘ã§ã€å¤‰æ›´ãŒã‚ã£ãŸå·®åˆ†ã ã‘ã‚’ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã«åæ˜ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## Template ã¨ Values ã«ã¤ã„ã¦

Helm Chart ã‚’ä½œæˆ/åˆ©ç”¨ã™ã‚‹éš›ã«ã€**Template** ã¨ **Values** ã¨ã„ã†æ¦‚å¿µãŒç™»å ´ã—ã¾ã™ã€‚

Template ã¨ã¯ã€Go ã® Template æ§‹æ–‡ã‚’ç”¨ã„ã¦è¨˜è¿°ã•ã‚ŒãŸ Kubernetes Manifest ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ã“ã¨ã‚’æŒ‡ã—ã¾ã™ã€‚  
ã“ã‚Œã«ã‚ˆã‚Šã€å¤‰æ•°ã‚„å¼ã€é–¢æ•°ãªã©ã‚’åŸ‹ã‚è¾¼ã‚“ã  Manifest ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã€ç’°å¢ƒã‚„ç”¨é€”ã«å¿œã˜ã¦è¨­å®šã‚’å¤‰æ›´ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ãã—ã¦ Values ã¨ã¯ã€Template å†…ã§ä½¿ç”¨ã•ã‚Œã‚‹å¤‰æ•°ã‚„è¨­å®šå€¤ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ãªã‚Šã¾ã™ã€‚

ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãª PVC ã® Manifest ãŒã‚ã‚‹ã¨ã—ã¾ã™ã€‚

```yaml
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: app-pvc
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: app
  resources:
    requests:
      storage: "10Gi"
```

ä¸Šè¨˜ã§ã¯ storage ã§ 10Gi ã‚’è¦æ±‚ã—ã¦ã„ã¾ã™ãŒã€ã“ã‚Œã‚’é–‹ç™ºç’°å¢ƒã®ã¿ 128 Mi ã«ã—ãŸã„ã¨ã—ãŸå ´åˆã€ä¸‹è¨˜ã®ã‚ˆã†ã« Template ã‚’æ”¹ä¿®ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

```yaml
# ./charts/my-app/templates/pvc.yaml
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: app-pvc
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: app
  resources:
    requests:
      storage: "{{ .Values.app.storage.size }}"
```

ãã—ã¦ã€ Values å´ã§ `app.storage.size` ã«å¯¾ã—ã¦ç’°å¢ƒã”ã¨ã«ç•°ãªã‚‹å€¤ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€Template å´ã®è¨­å®šã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```yaml
# dev-values.yaml
app:
  storage:
    size: 128Mi
```

```yaml
# prod-values.yaml
app:
  storage:
    size: 10Gi
```

ä¸Šè¨˜ã® Values ã‚’ Helmfile ã® `values` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ç’°å¢ƒã”ã¨ã«ç•°ãªã‚‹è¨­å®šã‚’é©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```yaml
# helmfile.yaml
environments:
  dev: {}
  prod: {}
---
releases:
  - name: my-app
    chart: ./charts/my-app
    values:
      - ./{{ .Environment.Name }}-values.yaml
```

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã«ã¤ã„ã¦

ç§ãŒä½œã£ãŸç’°å¢ƒã§ã¯ã€è¦ªã¨ãªã‚‹ helmfile.yaml ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«ç½®ãã€ãã“ã‹ã‚‰ `releases/{package}/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«ã‚ã‚‹ helmfile.yaml ã‚’å‘¼ã³å‡ºã™å½¢ã§ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚  
å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è¨­å®šã«ç’°å¢ƒå·®ãŒã‚ã‚‹å ´åˆã¯ã€`xxxx-values.yaml` ã‚„ `xxxx-values.yaml.gotmplï¼ˆyamlãƒ•ã‚¡ã‚¤ãƒ«ã«Go Templateã‚’é©ç”¨ã§ãã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰` ã‚’ä½¿ã£ã¦åˆ‡ã‚Šæ›¿ãˆã¦ã„ã¾ã™ã€‚  
ç’°å¢ƒã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹éš›ã¯ã€`-e` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã„ã€ `helmfile -e prod apply` ã®ã‚ˆã†ã«æŒ‡å®šã™ã‚‹ã“ã¨ã§è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

```
./
â”œâ”€â”€ helmfile.yaml
â””â”€â”€ releases
     â”œâ”€â”€ loki
     â”‚   â”œâ”€â”€ helmfile.yaml
     â”‚   â”œâ”€â”€ loki-misc
     â”‚   â””â”€â”€ values.yaml.gotmpl
     â”œâ”€â”€ traefik
     â”‚   â”œâ”€â”€ base-values.yaml.gotmpl
     â”‚   â”œâ”€â”€ dev-values.yaml.gotmpl
     â”‚   â”œâ”€â”€ helmfile.yaml
     â”‚   â”œâ”€â”€ prod-values.yaml.gotmpl
     â”‚   â””â”€â”€ traefik-misc
     â””â”€â”€ ...
```

```yaml
# ./helmfile.yaml
repositories:
  - name: grafana
    url: https://grafana.github.io/helm-charts
  - name: traefik
    url: https://traefik.github.io/charts
  # ...

environments:
  dev: {}
  prod: {}

helmfiles:
  - ./releases/loki/helmfile.yaml
  - ./releases/traefik/helmfile.yaml
  # ...
```

```yaml
# ./releases/traefik/helmfile.yaml
environments:
  dev:
    secrets:
      - ../../secrets/dev-secrets.yaml
  prod:
    secrets:
      - ../../secrets/prod-secrets.yaml
---
# ...
---
releases:
  - name: traefik
    chart: traefik/traefik
    version: 37.1.0
    namespace: traefik
    createNamespace: true
    values:
      - ./base-values.yaml.gotmpl
      # å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã£ã¦é©ç”¨ã™ã‚‹valuesã‚’åˆ‡ã‚Šæ›¿ãˆï¼ˆdev or prodï¼‰
      - ./{{ .Environment.Name }}-values.yaml.gotmpl
```

ã¾ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å¯¾ã—ã¦è¿½åŠ ã® Manifest ãŒå¿…è¦ã«ãªã£ãŸå ´åˆã€ãã®é…ä¸‹ã« `xxxx-misc` ã¨ã„ã† Helm Chart ã‚’ä½œæˆã— Manifest ã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã—ãŸã‚‚ã®ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

```
releases/traefik
â”œâ”€â”€ base-values.yaml.gotmpl
â”œâ”€â”€ dev-values.yaml.gotmpl
â”œâ”€â”€ helmfile.yaml
â”œâ”€â”€ prod-values.yaml.gotmpl
â””â”€â”€ traefik-misc
    â”œâ”€â”€ chart
    â”‚   â”œâ”€â”€ Chart.yaml
    â”‚   â”œâ”€â”€ templates
    â”‚   â””â”€â”€ values.yaml
    â”œâ”€â”€ dev-values.yaml
    â”œâ”€â”€ helmfile.yaml
    â””â”€â”€ prod-values.yaml
```

```yaml
# releases/traefik/helmfile.yaml

# ...

---
# traefik-misc å†…ã«ã‚‚ helmfile.yaml ã‚’ä½œæˆã—ã€
# æœ¬ç•ªç’°å¢ƒã¨é–‹ç™ºç’°å¢ƒã§è¨­å®šã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€
# ãŠãã‚‰ãè¦ªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã§ traefik ã¨ traefik-misc ç”¨ã®
# values ã‚’åˆ†ã‘ã¦ç®¡ç†ã™ã‚Œã°ã‚‚ã†å°‘ã—ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹æˆã«ãªã‚‹ã¨æ€ã„ã¾ã™
helmfiles:
  - path: ./traefik-misc/helmfile.yaml
---
# ...
```

misc ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½¿ç”¨ã—ãŸç®¡ç†æ–¹æ³•ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚

https://zenn.dev/johnmanjiro13/articles/3f12eeda0762b9

## Secret Encryption

æ©Ÿå¯†æƒ…å ±ã‚’ Helm/Helmfile ã§å–ã‚Šæ‰±ã†å ´åˆã¯ã€**age + sops + helm-secrets** ã‚’ç”¨ã„ã¦æš—å·åŒ–ã—ãŸæ©Ÿå¯†æƒ…å ±ã‚’ Git ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ã€Helm Chart ã«é©ç”¨ã™ã‚‹é‹ç”¨ãŒä¸€ç•ªæ¥½ã ã¨æ€ã„ã¾ã™ã€‚

ã¾ãš **age** ã¨ã¯ã€**æš—å·åŒ–ãƒ»å¾©å·ã‚’è¡Œã†æœ¬ä½“ã¨ãªã‚‹ãƒ„ãƒ¼ãƒ«**ã§ã™ã€‚  
`age-keygen -o key.txt` ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦å…¬é–‹éµã¨ç§˜å¯†éµã‚’ä½œæˆã—ã€å…¬é–‹éµã‚’ç”¨ã„ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã®æš—å·åŒ–ã€ç§˜å¯†éµã§ãã®å¾©å·ãŒã§ãã¾ã™ã€‚

```
$ age-keygen -o key.txt
Public key: age1ql3z7hjy54pw3hyww5ayyfg7zqgvc7w3j2elw8zmrj2kg5sfn9aqmcac8p
$ tar cvz ~/data | age -r age1ql3z7hjy54pw3hyww5ayyfg7zqgvc7w3j2elw8zmrj2kg5sfn9aqmcac8p > data.tar.gz.age
$ age --decrypt -i key.txt data.tar.gz.age > data.tar.gz
```

https://github.com/FiloSottile/age

æ¬¡ã« **sops** ã§ã™ãŒã€ã“ã¡ã‚‰ã¯ **age ç­‰ã®æš—å·åŒ–ãƒ„ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã—ã¦ã€.env ã‚„ yaml ãƒ•ã‚¡ã‚¤ãƒ«ãªã©ã®æ©Ÿå¯†æƒ…å ±ã®æš—å·åŒ–ãƒ»å¾©å·ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«**ã§ã™ã€‚  
è¨­å®šæ–¹æ³•ã¯å‰²æ„›ã„ãŸã—ã¾ã™ãŒã€ç°¡å˜ã«ã„ãˆã° `sops -e -i {file}` ã§æš—å·åŒ–ã€`sops -d -i {file}` ã§å¾©å·ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚  
ã¾ãŸã€`sops edit {file}` ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ©ç”¨ã™ã‚Œã°ã€æš—å·åŒ–ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€æ™‚çš„ã«å¾©å·ã—ã€vim ç­‰ã®ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã§ç·¨é›†ã—ã¦å†åº¦æš—å·åŒ–ã™ã‚‹ã¨ã„ã£ãŸã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

https://getsops.io

https://github.com/getsops/sops

ãã—ã¦ **helm-secrets** ã¯ã€sops ã‚’ä½¿ã£ã¦æš—å·åŒ–ã•ã‚ŒãŸå€¤ã‚’ Helm Chart ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚„ Values ã«åŸ‹ã‚è¾¼ã‚€ã“ã¨ãŒã§ãã‚‹ä»•çµ„ã¿ã§ã™ã€‚  
helm-secrets ã§ã¯ `helm secrets encrypt` ã‚„ `helm secrets edit` ã‚³ãƒãƒ³ãƒ‰ã§æš—å·åŒ–ã‚„æ©Ÿå¯†æƒ…å ±ã®ç·¨é›†ãŒã§ãã¾ã™ã€‚

```
$ helm secrets encrypt -i {file}
$ helm secrets edit {file}
```

https://github.com/jkroepke/helm-secrets

ç§ã®ç’°å¢ƒã§ã¯ã€ä½¿ç”¨ã™ã‚‹æ©Ÿå¯†æƒ…å ±ãŒé–‹ç™ºç’°å¢ƒã¨æœ¬ç•ªç’°å¢ƒã§ç•°ãªã£ã¦ã„ã‚‹ãŸã‚ã€ãã‚Œãã‚Œã« secrets.yaml ã®ä½œæˆã—ã€å„ helmfile.yaml ã® environments.secrets ã‹ã‚‰å‘¼ã³å‡ºã™ã¨ã„ã†æ–¹é‡ã‚’å–ã£ã¦ã„ã¾ã™ã€‚  
ï¼ˆä¸‹è¨˜ã®æ–¹æ³•ã§ã¯ secrets ãŒã‚°ãƒ­ãƒ¼ãƒãƒ«ç®¡ç†ã«ãªã£ã¦ã—ã¾ã†ã®ã§ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã”ã¨ã« secrets ã‚’ä½œæˆã—ã¦ç®¡ç†ã™ã‚‹æ–¹æ³•ã‚‚è‰¯ã„ã¨æ€ã„ã¾ã™ï¼‰

```
secrets
â”œâ”€â”€ dev-secrets.yaml
â””â”€â”€ prod-secrets.yaml
```

```yaml
# ./releases/traefik/helmfile.yaml
environments:
  dev:
    secrets:
      - ../../secrets/dev-secrets.yaml
  prod:
    secrets:
      - ../../secrets/prod-secrets.yaml
---
# ...
```

sops + age + helm-secrets ã®è©³ç´°ãªè§£èª¬ã¯ä»¥ä¸‹ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚

https://cloudandbuild.jp/blog/article-20240928

## ãŠã¾ã‘: Nix ã§ helm-secrets ã‚’ä½¿ã†

ã‚‚ã— Nix ã§ Kubernetes ã®å‘¨è¾ºãƒ„ãƒ¼ãƒ«ã®ç’°å¢ƒæ§‹ç¯‰ã‚’è¡Œã£ã¦ã„ãŸå ´åˆã€ä»¥ä¸‹ã® flake.nix ã‚’åˆ©ç”¨ã™ã‚‹ã¨ helm-secrets ãŒä½¿ãˆã‚‹çŠ¶æ…‹ã«ãªã‚Šã¾ã™ã®ã§ã€ã‚ˆã‘ã‚Œã°ã”åˆ©ç”¨ãã ã•ã„ã€‚

```nix
{
  description = "home-server";

  inputs = {
    nixpkgs.url = "github:nixos/nixpkgs/25.05";
    flake-utils.url = "github:numtide/flake-utils";
  };

  outputs = { self, nixpkgs, flake-utils }:
    flake-utils.lib.eachDefaultSystem (system:
      let
        overlays = [
          (final: prev: rec {
            kubernetes-helm-wrapped = prev.wrapHelm prev.kubernetes-helm {
              plugins = with prev.kubernetes-helmPlugins; [
                helm-diff
                helm-secrets
              ];
            };
          })
        ];
        pkgs = import nixpkgs { inherit system overlays; };
      in
      {
        devShells.default = pkgs.mkShell {
          packages = with pkgs; [
            kubectl
            kubernetes-helm-wrapped
            helmfile-wrapped
          ];
        };
      }
    );
}
```

## å‚è€ƒ

https://helm.sh
https://helmfile.readthedocs.io/en/latest/
